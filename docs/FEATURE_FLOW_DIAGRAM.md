# Enhanced Bulk Import - Feature Flow Diagram

## Overall Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ENHANCED BULK IMPORT FLOW                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Navigation  â”‚
â”‚  Admin â†’ Contentâ”‚
â”‚  â†’ Import       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Select      â”‚
â”‚  Hierarchy      â”‚
â”‚  â€¢ University   â”‚
â”‚  â€¢ Study Pack   â”‚
â”‚  â€¢ Unit         â”‚
â”‚  â€¢ Module       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Upload      â”‚
â”‚  Files          â”‚
â”‚  â€¢ Drag & Drop  â”‚
â”‚  â€¢ File Select  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. AUTO-DETECTION (filename-parser.ts)                         â”‚
â”‚                                                                  â”‚
â”‚  Input: "pit_questions_2018_RATT_R1.json"                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Extract Year:     /(\d{4})/          â†’ 2018             â”‚  â”‚
â”‚  â”‚ Extract Rotation: /R[1-4]/i          â†’ R1               â”‚  â”‚
â”‚  â”‚ Detect RATT:      /RATT/i            â†’ true (ID: 4)     â”‚  â”‚
â”‚  â”‚ Extract Course:   Remove year/RATT/R1 â†’ "pit"           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Fuzzy Match Course:                                       â”‚  â”‚
â”‚  â”‚   "pit" vs "PIT"           â†’ Exact match (1.0)           â”‚  â”‚
â”‚  â”‚   "pit" vs "Physiologie"   â†’ Partial match (0.7)         â”‚  â”‚
â”‚  â”‚   "cardio" vs "Cardiologie"â†’ Fuzzy match (0.8)           â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚   Threshold: 0.7 (70% confidence)                         â”‚  â”‚
â”‚  â”‚   If match found â†’ Auto-assign courseId                   â”‚  â”‚
â”‚  â”‚   If no match   â†’ Flag for manual selection              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. METADATA ASSIGNMENT                                          â”‚
â”‚                                                                  â”‚
â”‚  File: pit_questions_2018_RATT_R1.json                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ examYear:  2018              âœ… Auto-detected             â”‚ â”‚
â”‚  â”‚ courseId:  105               âœ… Fuzzy matched             â”‚ â”‚
â”‚  â”‚ courseName: "PIT"            âœ… Auto-assigned             â”‚ â”‚
â”‚  â”‚ sourceId:  4                 âœ… RATT detected             â”‚ â”‚
â”‚  â”‚ rotation:  "R1"              âœ… Auto-detected             â”‚ â”‚
â”‚  â”‚ needsCourseSelection: false  âœ… Match found               â”‚ â”‚
â”‚  â”‚ needsSourceSelection: false  âœ… RATT detected             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  File: cardio_2020.json                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ examYear:  2020              âœ… Auto-detected             â”‚ â”‚
â”‚  â”‚ courseId:  undefined         âŒ No match                  â”‚ â”‚
â”‚  â”‚ sourceId:  undefined         âŒ Not RATT                  â”‚ â”‚
â”‚  â”‚ rotation:  undefined         âšª Optional                  â”‚ â”‚
â”‚  â”‚ needsCourseSelection: true   âš ï¸  Manual required          â”‚ â”‚
â”‚  â”‚ needsSourceSelection: true   âš ï¸  Manual required          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. USER REVIEW & EDIT                                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ File: pit_questions_2018_RATT_R1.json                    â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚ â”‚ Year     â”‚ Course   â”‚ Source   â”‚ Rotation â”‚            â”‚  â”‚
â”‚  â”‚ â”‚ 2018 âœ…  â”‚ PIT âœ…   â”‚ RATT âœ…  â”‚ R1 âœ…    â”‚            â”‚  â”‚
â”‚  â”‚ â”‚ [Edit]   â”‚ [Edit]   â”‚ [Edit]   â”‚ [Edit]   â”‚            â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ File: cardio_2020.json                                    â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚ â”‚ Year     â”‚ Course   â”‚ Source   â”‚ Rotation â”‚            â”‚  â”‚
â”‚  â”‚ â”‚ 2020 âœ…  â”‚ [Select] â”‚ [Select] â”‚ [Select] â”‚            â”‚  â”‚
â”‚  â”‚ â”‚          â”‚ âŒ       â”‚ âŒ       â”‚ âšª       â”‚            â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ User selects:                                              â”‚  â”‚
â”‚  â”‚ â€¢ Course: "Cardiologie" (ID: 110)                         â”‚  â”‚
â”‚  â”‚ â€¢ Source: "Exam Bank" (ID: 2)                             â”‚  â”‚
â”‚  â”‚ â€¢ Rotation: "R2"                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. VALIDATION (bulk-import-validation.ts)                       â”‚
â”‚                                                                  â”‚
â”‚  For each file:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Parse JSON                                              â”‚ â”‚
â”‚  â”‚    âœ… Valid JSON format                                    â”‚ â”‚
â”‚  â”‚    âœ… Contains questions array                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ 2. Validate Questions                                       â”‚ â”‚
â”‚  â”‚    âœ… questionText (required, string)                      â”‚ â”‚
â”‚  â”‚    âœ… questionType (SINGLE_CHOICE | MULTIPLE_CHOICE)       â”‚ â”‚
â”‚  â”‚    âœ… answers (array, min 2 items)                         â”‚ â”‚
â”‚  â”‚    âœ… answers[].answerText (required, string)              â”‚ â”‚
â”‚  â”‚    âœ… answers[].isCorrect (required, boolean)              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ 3. Validate Answer Counts                                   â”‚ â”‚
â”‚  â”‚    âœ… SINGLE_CHOICE: exactly 1 correct                     â”‚ â”‚
â”‚  â”‚    âœ… MULTIPLE_CHOICE: at least 1 correct                  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ 4. Validate Metadata                                        â”‚ â”‚
â”‚  â”‚    âœ… examYear (required, 1900-current)                    â”‚ â”‚
â”‚  â”‚    âœ… courseId (required, valid course)                    â”‚ â”‚
â”‚  â”‚    âœ… sourceId (required, valid source)                    â”‚ â”‚
â”‚  â”‚    âšª rotation (optional, R1-R4)                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Validation Summary:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Total Files:        5                                      â”‚ â”‚
â”‚  â”‚ Valid Files:        4  âœ…                                  â”‚ â”‚
â”‚  â”‚ Invalid Files:      1  âŒ                                  â”‚ â”‚
â”‚  â”‚ Total Questions:    250                                    â”‚ â”‚
â”‚  â”‚ Missing Year:       0                                      â”‚ â”‚
â”‚  â”‚ Missing Course:     0                                      â”‚ â”‚
â”‚  â”‚ Missing Source:     0                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  âŒ Import Blocked: At least one file is invalid               â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  8. Fix Errors  â”‚
â”‚  â€¢ Review errorsâ”‚
â”‚  â€¢ Fix JSON     â”‚
â”‚  â€¢ Re-upload    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  9. IMPORT (enhanced-bulk-import-wizard.tsx)                     â”‚
â”‚                                                                  â”‚
â”‚  âœ… All files valid â†’ "Start Import" enabled                    â”‚
â”‚                                                                  â”‚
â”‚  For each file (sequential):                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ File 1: pit_questions_2018_RATT_R1.json                    â”‚ â”‚
â”‚  â”‚ Status: Uploading... ðŸ”„                                    â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ POST /api/v1/admin/questions/bulk                          â”‚ â”‚
â”‚  â”‚ {                                                           â”‚ â”‚
â”‚  â”‚   "metadata": {                                             â”‚ â”‚
â”‚  â”‚     "courseId": 105,                                        â”‚ â”‚
â”‚  â”‚     "universityId": 1,                                      â”‚ â”‚
â”‚  â”‚     "studyPackId": 5,                                       â”‚ â”‚
â”‚  â”‚     "unitId": 10,                                           â”‚ â”‚
â”‚  â”‚     "moduleId": 45,                                         â”‚ â”‚
â”‚  â”‚     "examYear": 2018,                                       â”‚ â”‚
â”‚  â”‚     "sourceId": 4,                                          â”‚ â”‚
â”‚  â”‚     "rotation": "R1"                                        â”‚ â”‚
â”‚  â”‚   },                                                        â”‚ â”‚
â”‚  â”‚   "questions": [...]                                        â”‚ â”‚
â”‚  â”‚ }                                                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ Response: Success âœ…                                        â”‚ â”‚
â”‚  â”‚ Status: Success (50 questions created)                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80% (4/5 files)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  10. RESULTS                                                     â”‚
â”‚                                                                  â”‚
â”‚  Import Complete! ðŸŽ‰                                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Successfully imported 4 file(s)                         â”‚ â”‚
â”‚  â”‚ âŒ Failed to import 1 file(s)                              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ Details:                                                    â”‚ â”‚
â”‚  â”‚ â€¢ pit_questions_2018_RATT_R1.json    âœ… 50 questions      â”‚ â”‚
â”‚  â”‚ â€¢ cardio_2020_R2.json                âœ… 75 questions      â”‚ â”‚
â”‚  â”‚ â€¢ anatomy_2019_RATT.json             âœ… 60 questions      â”‚ â”‚
â”‚  â”‚ â€¢ neuro_2021.json                    âœ… 45 questions      â”‚ â”‚
â”‚  â”‚ â€¢ invalid_file.json                  âŒ Error: ...        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ Total Questions Created: 230                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  ðŸ”„ Stay on same page (no redirect)                             â”‚
â”‚  ðŸ“‹ Can review results and retry failed files                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Metadata Detection Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    METADATA DETECTION LOGIC                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Filename: "pit_questions_2018_RATT_R1.json"
â”‚
â”œâ”€ EXAM YEAR
â”‚  â”‚
â”‚  â”œâ”€ Regex: /(\d{4})/
â”‚  â”œâ”€ Found: "2018"
â”‚  â”œâ”€ Validate: 1900 â‰¤ 2018 â‰¤ 2025 âœ…
â”‚  â””â”€ Result: examYear = 2018
â”‚
â”œâ”€ ROTATION
â”‚  â”‚
â”‚  â”œâ”€ Regex: /[_\-\s]?(R[1-4])[_\-\s\.]?/i
â”‚  â”œâ”€ Found: "R1"
â”‚  â””â”€ Result: rotation = "R1"
â”‚
â”œâ”€ SOURCE
â”‚  â”‚
â”‚  â”œâ”€ Regex: /RATT/i
â”‚  â”œâ”€ Found: "RATT"
â”‚  â””â”€ Result: sourceId = 4, isRATT = true
â”‚
â””â”€ COURSE
   â”‚
   â”œâ”€ Extract: Remove year, rotation, RATT, common words
   â”œâ”€ Result: "pit"
   â”‚
   â”œâ”€ Fuzzy Match:
   â”‚  â”‚
   â”‚  â”œâ”€ Get all courses from selected module
   â”‚  â”‚  â””â”€ Courses: ["PIT", "Cardiologie", "Neurologie", ...]
   â”‚  â”‚
   â”‚  â”œâ”€ Try exact match: "pit" == "PIT" (case-insensitive)
   â”‚  â”‚  â””â”€ Match! Score: 1.0 âœ…
   â”‚  â”‚
   â”‚  â”œâ”€ If no exact match, try fuzzy:
   â”‚  â”‚  â”œâ”€ "pit" contains in "PIT"? â†’ Score: 0.8
   â”‚  â”‚  â”œâ”€ Normalize and compare â†’ Score: 0.9
   â”‚  â”‚  â””â”€ Word-by-word match â†’ Score: 0.6
   â”‚  â”‚
   â”‚  â”œâ”€ Find best score above threshold (0.7)
   â”‚  â”‚  â””â”€ Best: "PIT" with score 1.0
   â”‚  â”‚
   â”‚  â””â”€ Result: courseId = 105, courseName = "PIT"
   â”‚
   â””â”€ If no match found:
      â””â”€ Result: needsCourseSelection = true
```

## Validation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VALIDATION FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File Upload
â”‚
â”œâ”€ Parse JSON
â”‚  â”œâ”€ Valid JSON? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  â”œâ”€ Yes â†’ Continue                               â”‚
â”‚  â”‚  â””â”€ No â†’ Error: "Invalid JSON format" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ INVALID
â”‚  â”‚                                                   â”‚
â”‚  â”œâ”€ Has questions array? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”œâ”€ Yes â†’ Continue                             â”‚ â”‚
â”‚  â”‚  â””â”€ No â†’ Error: "No questions array" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â†’ INVALID
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â””â”€ Questions count > 0? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚     â”œâ”€ Yes â†’ Continue                             â”‚ â”‚
â”‚     â””â”€ No â†’ Error: "Empty questions array" â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â†’ INVALID
â”‚                                                    â”‚ â”‚
â”œâ”€ Validate Each Question                           â”‚ â”‚
â”‚  â”œâ”€ questionText exists? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”œâ”€ questionType valid? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”œâ”€ answers array exists? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”œâ”€ answers.length â‰¥ 2? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”œâ”€ Each answer has answerText? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”œâ”€ Each answer has isCorrect? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â””â”€ Correct answer count valid? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚     â”œâ”€ SINGLE_CHOICE: exactly 1 âœ…               â”‚ â”‚
â”‚     â””â”€ MULTIPLE_CHOICE: at least 1 âœ…            â”‚ â”‚
â”‚                                                    â”‚ â”‚
â”œâ”€ Validate Metadata                                â”‚ â”‚
â”‚  â”œâ”€ examYear exists? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”œâ”€ Yes â†’ Continue                             â”‚ â”‚
â”‚  â”‚  â””â”€ No â†’ Error: "Missing exam year" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â†’ INVALID
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”œâ”€ courseId exists? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”œâ”€ Yes â†’ Continue                             â”‚ â”‚
â”‚  â”‚  â””â”€ No â†’ Error: "Missing course" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â†’ INVALID
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â””â”€ sourceId exists? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚     â”œâ”€ Yes â†’ Continue                             â”‚ â”‚
â”‚     â””â”€ No â†’ Error: "Missing source" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â†’ INVALID
â”‚                                                    â”‚ â”‚
â””â”€ All Checks Passed â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â†’ VALID âœ…
```

